<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Hash λ Bye - ネットワークプログラマビリティ勉強会 #7</title>
        <link rel="stylesheet" type="text/css" href="../css/pure-nr-min.css" />
        <link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css" />
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
        <link rel="stylesheet" type="text/css" href="../css/highlight.css">


    </head>
    <body>
        <div class="pure-menu pure-menu-horizontal">
          <a href="../" class="brand pure-menu-heading pure-menu-link">Hash λ Bye</a>
          <ul class="pure-menu-list">
            <li class="pure-menu-item">
              <a href="../" class="pure-menu-link">Home</a>
            </li>
            <li class="pure-menu-item">
              <a href="../about.html" class="pure-menu-link"></i>About</a>
            </li>
            <li class="pure-menu-item">
              <a href="../contact.html" class="pure-menu-link">Contact</a>
            </li>
            <li class="pure-menu-item">
              <a href="../archive.html" class="pure-menu-link">Archive</a>
            </li>
          </ul>
        </div>

        <div id="content">
            <h1 class="title">ネットワークプログラマビリティ勉強会 #7</h1>

            <div class="body">
            <div class="info">
    Posted on December  9, 2015
    
</div>

<h2 id="タイムテーブル">タイムテーブル</h2>
<ul>
<li>19:00-19:05 はじめに<br />
</li>
<li>19:05-19:20 [祝1周年] 今までのネットワークプログラマビリティ勉強会のおさらい tetz</li>
<li>19:20-19-50 物理ネットワーク「も」ソフトウェアでテストしよう! はぎわら さん</li>
<li>中休憩<br />
</li>
<li>20:00-20:30 Docker メトリクスの可視化 <span class="citation">@janus_wel</span> さん</li>
<li>20:30-20:40 クラウドインフラのネットワーク自動描画 hojo さん</li>
</ul>
<h2 id="祝1周年-今までのネットワークプログラマビリティ勉強会のおさらい">[祝1周年] 今までのネットワークプログラマビリティ勉強会のおさらい</h2>
<p>これまで扱われたトピック</p>
<ul>
<li>半分くらいがリピータ</li>
</ul>
<h3 id="openstack">OpenStack</h3>
<blockquote>
<p>Congress: ポリシーを記述してNWを制御する Datalog: ポリシーの記述言語</p>
<p>OpenStackで敷いたNWをDockerで利用する、など</p>
<p>HWが抽象化、標準化していっている流れ。 HWで競合と差別化できなくなってきている。 いままではHWの特性を知っていることがエンジニアの価値だったが、 これからはサービスをAPIで制御していくのが価値になっていく。</p>
</blockquote>
<h3 id="docker">Docker</h3>
<p>Dockerのトピックも増えていっている。 Dockerはネットワークのノードというよりもサービスを表す概念かな。 IPは重要ではなくなってきている。</p>
<blockquote>
<p>サービスのエンドポイントは浮動するのが前提となるので、 サービス検知やローバラが重要。 ホスト間接続はVXLAN一択</p>
</blockquote>
<p>なんでVXLAN一択なんだろうか。 → この記載によるとDockerのlibnetworkがVXLANしか提供していないからのようだ。<a href="https://docs.docker.com/engine/userguide/networking/dockernetworks/#an-overlay-network">An overlay network</a></p>
<p><a href="https://github.com/docker/libnetwork/blob/master/docs/design.md">libnetwork</a></p>
<h3 id="infra-as-code">Infra as Code</h3>
<blockquote>
<p>Hashicorpツールの躍進がすごい</p>
</blockquote>
<p>まだ詳しくないな。Vagrantくらいしか使っていない。</p>
<p>発表者の方はConsul使ってらっしゃるらしい。</p>
<blockquote>
<p>NW機器関連だとNetconfでの自動化とかをチェックしていきたい</p>
</blockquote>
<h3 id="テスト駆動インフラ">テスト駆動インフラ</h3>
<blockquote>
<p>メリットはSW開発のベストプラクティスを適用できること</p>
</blockquote>
<p>継続的にネットワークをリリースしていくことができるようになる。 B/GデプロイメントみたいなことがHWを下敷きにしてできるものなのだろうか。</p>
<h3 id="運用diy">運用＆DIY</h3>
<blockquote>
<p>ELKでNetflow管理とか</p>
</blockquote>
<p>ちょうどやっているところ。</p>
<p>他におもしろトピックあるかな。 ふつうにNetconfでMPLS制御しているだけだしな。</p>
<h2 id="物理ネットワークもソフトウェアでテストしよう">物理ネットワーク「も」ソフトウェアでテストしよう!</h2>
<h3 id="問題点">問題点</h3>
<blockquote>
<p>作るのは早いがテスト・デバッグが難しい</p>
</blockquote>
<p>ネットワーク機器自体が持つOAMを使うのが良いのでないかな。 ドメインを囲む外側がup MEP打ったりとか。</p>
<blockquote>
<p>NWのテストは物理配置を考慮しなければならない</p>
</blockquote>
<p>よくある物理配線の罠とかだなー。</p>
<blockquote>
<p>仮想化に伴ってトラブルシュートがどんどん複雑になってきている</p>
</blockquote>
<blockquote>
<p>人が直接作業する・移動するということをやめたい。 属人性が高いし、マシンリソースも限られている。 いつでも回帰テストできるようにしないと行けない。</p>
</blockquote>
<h3 id="実際やってみた">実際やってみた</h3>
<blockquote>
<p>物理作業の変更が多いラボ。 任意の箇所にテスト用のノードを配置したい。</p>
</blockquote>
<p>OpenflowとかでL1patchによる仮想ワイヤを作るのか。</p>
<ul>
<li>テストトラフィックのジェネレータを作って集中制御</li>
<li>Dispatcherによって出力先を制御</li>
</ul>
<blockquote>
<p>mininetがノード増殖がよかったので物理でもやれたらいい。 トラフィックの生成ホストはmininetで接続制御はOVSでさばく</p>
</blockquote>
<p>やっぱりDUTを囲む仮想化インフラが肝になるそうだ。 対象が“フツー”のIPネットワークであればいいのだけれど、 大容量の映像データを伝送する場合は映像ジェネレータ</p>
<blockquote>
<p>mininetは仮想NW内で通信するだけじゃなくmininetから外のNWに対しても テストパターンを出力できる。</p>
</blockquote>
<p>問題はパケロスや優先制御の正しさをどう評価するか。 どちらかというと狙ったレートでホストが通信できるか。 JitterやWanderの測定など。</p>
<p>機器の信頼性、冗長化によって信号を救済できるかどうか。</p>
<p>Q. ネットワークの品質テストについて</p>
<blockquote>
<p>間にいろいろ挟まっているので実現は難しそう。 機能性のテストがいまの所のターゲット。</p>
</blockquote>
<p>Q. LLDPの透過は可能なのか</p>
<blockquote>
<p>CDPの透過は確認できているが、どうだろう。。。</p>
</blockquote>
<h2 id="dockerメトリクスの可視化">Dockerメトリクスの可視化</h2>
<h3 id="可視化の意義">可視化の意義</h3>
<blockquote>
<p>死活監視の可視化 consulなどでカバーされているので大丈夫</p>
</blockquote>
<blockquote>
<p>リソースの効率的な利用 ドキュメンテーション（レポーティング） いずれもメトリックの収集が重要</p>
</blockquote>
<p>Docker APIをinfluxDBへ。お、これはGarafanaの案件か。</p>
<blockquote>
<p>リソースの収集はDockerのstats APIでとれる Metrics CollectorはRubyで書いてみた</p>
</blockquote>
<p>可視化機構自体はZabbixやGarafanaでできるし、 DockerのAPIでデータ抽出しているのもZabbix Agentとかでまかなえているなうちは。</p>
<blockquote>
<p>statsはあまり性能がよろしくない。 Dockerはcgroupの中にあるファイルシステム上のデータを読むことで 素早い応答で抽出できる。 抽出をエージェントで賄えばハイパフォーマンスにデータ収集できる。</p>
</blockquote>
<blockquote>
<p>Q. MQなどでボトルネックを緩衝するなどのアイデアはあるか？ 今後順次取り入れていきたい</p>
</blockquote>
<h2 id="クラウドインフラのネットワーク自動描画">クラウドインフラのネットワーク自動描画</h2>
<blockquote>
<p>クラウドをつなぐWANではなくWANに乗るサービスノードの描画。 CloudStackインスタンス構成の自動生成機能。</p>
</blockquote>
<p>あれ、OpenStackでもそういうのあったような。</p>
<blockquote>
<p>クラウドの構成変更に対して構成図の変更が追いついていない</p>
</blockquote>
<p>どのレベルまでの構成図を求められるのだろう？ IPネットワーク上でのリンクなのかな。</p>
<p>プロダクションでもCloudStackの採用例は多いらしい。 何に価値を見出してCloudStackなのだろう。</p>
<blockquote>
<p>CloudStackはスのママだと複雑すぎて構成が把握しづらい デモ</p>
</blockquote>
<p>うーん、まさしくOpenStackでは？</p>
<p>SVGで描画とのことだがどんなライブラリ使っているのだろう。</p>
<p>おー、network図についての規則や意味論を語った論文があるのか。</p>
<blockquote>
<p>描画について統一化されたルールがあれば普及していく</p>
</blockquote>
<p>その観点はなかった。なるほど。 統一的な語彙が必要なのか。</p>
<blockquote>
<p>Labella.jsというのが似たアプローチをとっている</p>
</blockquote>
<p>よさげ。 D3.jsを更にタイムライン向けに特化したようなライブラリのようだ。</p>
<p>ネットワーク図について語る会というのがあるらしい。</p>
<h2 id="lt-1-10分で作るクラスライブラリ">LT-1 10分で作るクラスライブラリ</h2>
<p>エンジニア向けのプレゼン技術研究会</p>
<p>いいなー。入ってみたい。いろんな業種が集まるらしい。 土曜日の午後にやっている。</p>
<p>メッセージフォーマットが不明確</p>
<p>ネットワーク機器に対するAPIコール。 コマンド実行はできるけれど結果を正規化するのが大変。</p>
<p>まあパワーで解析しきるらしい。</p>

            </div>
        </div>
        <div id="footer">
            Site proudly generated by
            <a href="http://jaspervdj.be/hakyll">Hakyll</a>
        </div>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          tex2jax: {inlineMath: [['\\(','\\)']]},
          processEscape: true
        });
        </script>

        <script src="../js/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
