------------------
title: プロセッサを支える技術
date: 2016-07-13
tags: [reading]
------------------

[プロセッサを支える技術](https://www.amazon.co.jp/dp/4774145211/)

## はじめに

ぐわー難しい。登場人物が何かは説明されるので解るが、動作は文章だけではなかなか追えない。
特に全然理解できてないなと思うのは3章。もっともディープな解説がなされるところだが、そこが解ってないという体たらく……。
下記は特によく解ってない。

- キャッシュの3つの方式
- 演算器
- メモリアクセス

## 理解したことを整理する

基本的なパイプラインの構造はとても泥臭くて面白かった。
パイプラインを効率的に実行するための障害となるのが、

- 構造的ハザード
- データハザード
- 制御ハザード

*T.B.D.*

## メモ

### コモンバス

ルータの内部アーキテクチャに踏み入るとGrant,Requestという用語が出てくるが、
これがプロセッサと入出力をつなぐコモンバスの命令であることがわかった。

### x86はCISC?

x86命令はCISCよりの複雑な命令体系を持っているが、結局ハードがRISCっぽい命令に変換して
パイプランに送り込んでいるらしい。命令の構造が単純なRISCの方が効率いいね、という話になったのだろう。

### 回りくどいVMMへの委譲方法

VMMによる仮想化はゲストOSから特権命令を発行した時に発生する例外を捕まえてVMMにインターセプトさせるらしく
なんだかものすごく効率悪そうに感じた。イベント駆動っぽいので他のやり方よりももしや性能がいいという理由から選ばれているのかもしれない。
